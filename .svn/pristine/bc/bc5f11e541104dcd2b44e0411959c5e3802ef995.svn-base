<?php 
    class Soiree
    {
        private $id;
        private $nom;
        private $date;
        private $nombrePlace;
        private $prix;
        private $nombrePlaceRestante;

        private $soireeDAO;

        public function __construct($id, $soireeDAO) {
            $this->id = $id;
            $this->nom = "";
            $this->date = "";
            $this->nombrePlace = 0;
            $this->prix = 0;
            $this->nombrePlaceRestante = 0;
            $this->soireeDAO = $soireeDAO;
        }

        public function __construct1($id, $nom, $date, $nombrePlace, $prix, $soireeDAO){
            $this->id = $id;
            $this->nom = $nom;
            $this->date = $date;
            $this->nombrePlace = $nombrePlace;
            $this->prix = $prix;
            $this->nombrePlaceRestante = $nombrePlace;
            $this->soireeDAO = $soireeDAO;
        }

        public function charger(){
            $tableau = $this->soireeDAO->chargerSoiree($this->id);
            $this->nom = $tableau["nom"];
            $this->date = $tableau["date"];
            $this->nombrePlace = $tableau["nombreDePlace"];
            $this->prix = $tableau["prixPlace"];
            $this->nombrePlaceRestante = $this->nombrePlace - $tableau["nbplace"];
            if($this->nombrePlaceRestante < 0) $this->nombrePlaceRestante = 0;
        }

        public function getId(){
            return $this->id;
        }

        public function getNom(){
            return $this->nom;
        }

        public function setNom($nom){
            $this->nom=$nom;
        }

        public function getDate(){
            return $this->date;
        }

        public function setDate($date){
            $this->date=$date;
        }

        public function getNombrePlace(){
            return $this->nombrePlace;
        }

        public function setNombrePlace($nombrePlace){
            $this->nombrePlace=$nombrePlace;
        }

        public function getNombrePlaceRestante(){
            return $this->nombrePlaceRestante;
        }

        public function setNombrePlaceRestante($nombrePlaceRestante){
            $this->nombrePlaceRestante=$nombrePlaceRestante;
        }

        public function getPrix(){
            return $this->prix;
        }

        public function setPrix($prix){
            $this->prix=$prix;
        }

        public function ajouterSoiree(){
            // Utilisation de la classe DAO
            $ordresql = "INSERT INTO soiree VALUES(0, '$date', '$nom', $nombrePlace, $prix)";
            $nb = $this->monPdo->exec($ordresql);
            // Retourne vrai si l'insertion a eu lieu, sinon renvoie faux
            return $nb > 0;
        }

        public function modifierSoiree(){
            // Utilisation de la classe DAO
            $ordresql = "UPDATE soiree SET date='$date', nom='$nom', nombreDePlace=$nombrePlace, prix=$prix WHERE idSoiree=$id";
            $nb = $this->monPdo->exec($ordresql);
            // Retourne vrai si la modification a eu lieu, sinon renvoie faux
            return $nb > 0;
        }

        public function supprimerSoiree(){
            // Utilisation de la classe DAO
            $ordresql = "DELETE FROM soiree WHERE idSoiree=$id";
            $nb = $this->monPdo->exec($ordresql);
            // Retourne vrai si la suppression a eu lieu, sinon renvoie faux
            return $nb > 0;
        }
    }
    
?>