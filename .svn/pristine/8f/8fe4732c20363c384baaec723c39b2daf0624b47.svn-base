<?php 
    class SoireeDAO
    {
        private $gestionConnexion;

        public function __construct(){
            $this->gestionConnexion = GestionConnexion::getConnexion();
        }

        public function chargerSoiree($idSoiree){
            $soiree = array();
            $sql = "SELECT idSoiree, nom, date, prixPlace, nombreDePlace, nombreDePlace - (SELECT SUM(nbPlacePrise) FROM reserver WHERE idSoiree=$idSoiree GROUP BY reserver.idSoiree) AS nbPlaceRestante FROM soiree WHERE idSoiree = $idSoiree";
            $res = $this->gestionConnexion->query($sql);
            $soiree = $res->fetch();
            return $soiree;
        }
    }
    
?>